seq_info_format:
- ','
- project
- seq1
- seq2
- config_id
DEFAULT:
  cmd_fusion_order: ['1']
  cmd_name: trs.cmd
  log_name: trs.log
  order:
  - helloworld
  - trim
  - STAR
  - featureCounts
  - format
  - redistribute
  order_multiprojects:
  - generate_cmd
  outdir: trsout
  workflow:
    STAR:
      check_paths: []
      cmd_part: '1'
      father:
        iseq1:
        - trim
        - oseq1
        iseq2:
        - trim
        - oseq2
      need: true
      outdir: star
      outparams: {}
      params:
        --genomeDir: /mnt/Storage2/home/DB/STAR/hg38
        --outFileNamePrefix: '{outdir}/{project}/{project}_'
        --outFilterMultimapNmax: '500'
        --outSAMattributes: NH HI NM MD XS AS
        --outSAMtype: BAM SortedByCoordinate
        --readFilesCommand: zcat
        --readFilesIn: '{iseq1}  {iseq2}'
        --runThreadN: '10'
      path: STAR
      variables: {}
    featureCounts:
      check_paths: []
      cmd_part: '1'
      father:
        ibam:
        - STAR
        - obam_sorted
      functions:
      - mkdirs("{outputpath}")
      need: true
      outdir: features
      outparams:
        obam: '{outputpath}/{project}_Aligned.sortedByCoord.out.bam.featureCounts.bam'
      params:
        ' ': '{ibam}'
        --fracOverlap: '0.1'
        --fraction: ' '
        -B: ' '
        -M: ' '
        -O: ' '
        -R: BAM
        -T: '10'
        -a: /mnt/Storage2/home/zengshiyang/DB/refGene/hg38.repeats.gtf
        -g: gene_id
        -o: '{outputpath}/{project}_featurecounts'
        -p: ' '
      path: featureCounts
      variables:
        outputpath: '{outdir}/{project}'
    format:
      check_paths: []
      cmd_part: '1'
      father:
        ibam:
        - featureCounts
        - obam
      need: true
      outdir: features
      params:
        ' ': -x BX -x NH -x AS -x nM -x HI -x IH -x NM -x uT -x MD -x jM -x jI -x
          XN -x XS -x XS
        '  ': '{ibam}'
        -@: '10'
        '>': '{outdir}/{project}/{project}_featurecounts.sam.txt'
        '| grep -e': '"XT:Z"'
      path: samtools view
    helloworld:
      need: true
      params:
        ' ': '" hello world"'
      path: echo
    redistribute:
      check_paths: []
      cmd_part: '1'
      father:
        isam:
        - format
        - osam
      functions:
      - mkdirs('{outputpath}')
      need: true
      outdir: distribution
      params:
        -f: '{isam}'
        -m: 1
        -n: '{outputpath}/{project}_distribution.txt'
        -p: '12'
        -r: /mnt/Storage2/home/zengshiyang/DB/refGene/hg38.repeats.saf
        -s: '50'
      path: redistribute_multiple_aligned_reads.r
      variables:
        outputpath: '{outdir}/{project}'
    trim:
      check_paths: []
      cmd_part: '1'
      father:
        iseq1:
        - raw
        - seq1
        iseq2:
        - raw
        - seq2
      need: true
      outdir: trimed
      outparams:
        example: '{project}/hello'
      params:
        ' ': '{iseq1} {iseq2}'
        --fastqc: ''
        --fastqc_args: '"--threads 8 "'
        --length: '20'
        --paired: ''
        --quality: '20'
        -o: '{outdir}'
      path: trim_galore
      variables: {}

